---
title: "Modules Explained"
icon: "component"
---

## Overview

Modules extend ERC-7579 smart accounts with pluggable functionality. In Rhinestone, you compose an account by installing:
- **Validators**: signature/access control (e.g., ECDSA, Passkeys, Smart Sessions, Social Recovery)
- **Executors**: execution-time extensions (e.g., Intent Executor)
- **Fallbacks**: optional compatibility for certain account implementations
- **Hooks**: optional pre-/post-execution logic

## Validators

### Owner (ECDSA / ECDSA-v0)

```ts
import { encodeAbiParameters, type Address } from 'viem'
import { MODULE_TYPE_ID_VALIDATOR, type Module } from '@rhinestone/sdk/modules/common'

const OWNABLE_VALIDATOR_ADDRESS: Address = '0x000000000013fdB5234E4E3162a810F54d9f7E98'

export function getOwnableValidator(
  threshold: number,
  owners: Address[],
  address?: Address,
): Module {
  return {
    address: address ?? OWNABLE_VALIDATOR_ADDRESS,
    initData: encodeAbiParameters(
      [
        { name: 'threshold', type: 'uint256' },
        { name: 'owners', type: 'address[]' },
      ],
      [BigInt(threshold), owners.map((o) => o.toLowerCase() as Address).sort()],
    ),
    deInitData: '0x',
    additionalContext: '0x',
    type: MODULE_TYPE_ID_VALIDATOR,
  }
}
```

### Passkeys (WebAuthn)

```ts
import { encodeAbiParameters, type Address } from 'viem'
import { MODULE_TYPE_ID_VALIDATOR, type Module } from '@rhinestone/sdk/modules/common'

const WEBAUTHN_VALIDATOR_ADDRESS: Address = '0x0000000000578c4cB0e472a5462da43C495C3F33'

type PublicKey = { x: bigint; y: bigint }

export function getWebAuthnValidator(
  threshold: number,
  publicKeys: PublicKey[],
): Module {
  return {
    address: WEBAUTHN_VALIDATOR_ADDRESS,
    initData: encodeAbiParameters(
      [
        { name: 'threshold', type: 'uint256' },
        {
          name: 'credentials',
          type: 'tuple[]',
          components: [
            { name: 'pubKeyX', type: 'uint256' },
            { name: 'pubKeyY', type: 'uint256' },
            { name: 'requireUV', type: 'bool' },
          ],
        },
      ],
      [
        BigInt(threshold),
        publicKeys.map((pk) => ({ pubKeyX: pk.x, pubKeyY: pk.y, requireUV: false })),
      ],
    ),
    deInitData: '0x',
    additionalContext: '0x',
    type: MODULE_TYPE_ID_VALIDATOR,
  }
}
```

### Smart Sessions

```ts
import { getSmartSessionValidator } from '@rhinestone/sdk/modules/validators/smart-sessions'

// Part of setup:
const smartSessionValidator = getSmartSessionValidator(config)
if (smartSessionValidator) validators.push(smartSessionValidator)
```

### Social Recovery

```ts
import { encodeAbiParameters, type Address } from 'viem'
import { MODULE_TYPE_ID_VALIDATOR, type Module } from '@rhinestone/sdk/modules/common'

const SOCIAL_RECOVERY_VALIDATOR_ADDRESS: Address = '0xA04D053b3C8021e8D5bF641816c42dAA75D8b597'

export function getSocialRecoveryValidator(
  guardians: Address[],
  threshold = 1,
): Module {
  const sorted = [...guardians].sort()
  return {
    type: MODULE_TYPE_ID_VALIDATOR,
    address: SOCIAL_RECOVERY_VALIDATOR_ADDRESS,
    initData: encodeAbiParameters(
      [
        { type: 'uint256', name: 'threshold' },
        { type: 'address[]', name: 'guardians' },
      ],
      [BigInt(threshold), sorted],
    ),
    deInitData: '0x',
    additionalContext: '0x',
  }
}
```

## Executors

```ts
import { MODULE_TYPE_ID_EXECUTOR, type Module } from '@rhinestone/sdk/modules/common'
import { INTENT_EXECUTOR_ADDRESS, INTENT_EXECUTOR_ADDRESS_DEV } from '@rhinestone/sdk/modules/omni-account'

const executors: Module[] = [
  {
    address: config.useDev ? INTENT_EXECUTOR_ADDRESS_DEV : INTENT_EXECUTOR_ADDRESS,
    initData: '0x',
    deInitData: '0x',
    additionalContext: '0x',
    type: MODULE_TYPE_ID_EXECUTOR,
  },
]
```

## Fallbacks (Optional)

```ts
import { encodeAbiParameters, type Address } from 'viem'
import { MODULE_TYPE_ID_FALLBACK, type Module } from '@rhinestone/sdk/modules/common'

const SMART_SESSION_COMPATIBILITY_FALLBACK_ADDRESS: Address =
  '0x12cae64c42f362e7d5a847c2d33388373f629177'

const fallbacks: Module[] = [
  {
    address: SMART_SESSION_COMPATIBILITY_FALLBACK_ADDRESS,
    initData: encodeAbiParameters(
      [
        { name: 'selector', type: 'bytes4' },
        { name: 'flags', type: 'bytes1' },
        { name: 'data', type: 'bytes' },
      ],
      ['0x84b0196e', '0xfe', '0x'],
    ),
    deInitData: '0x',
    additionalContext: '0x',
    type: MODULE_TYPE_ID_FALLBACK,
  },
]
```

## Helper: RIP-7212 Support

```ts
import { type Chain } from 'viem'
import { optimism, optimismSepolia, polygon, base, baseSepolia, arbitrum, arbitrumSepolia } from 'viem/chains'

export function isRip7212SupportedNetwork(chain: Chain) {
  const supportedChains: Chain[] = [
    optimism,
    optimismSepolia,
    polygon,
    base,
    baseSepolia,
    arbitrum,
    arbitrumSepolia,
  ]
  return supportedChains.includes(chain)
}
```

This guide matches the SDKâ€™s module composition pattern:
- Install an owner validator (required)
- Optionally, add Smart Sessions and Social Recovery
- Add the Intent Executor
- Include a compatibility fallback for Safe when sessions are enabled

For account-specific details, refer to the SDK reference.
